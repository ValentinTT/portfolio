---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import LinkButton from "../../LinkButton.astro";

export interface Props {
  title: string;
  imagePath?: string;
  gradient: string;
}

const { title, imagePath, gradient } = Astro.props;
// https://cosmicthemes.com/blog/astro-dynamic-image-imports/
const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/**/*.{jpeg,jpg,png,gif}"
);
if (imagePath && !images[imagePath])
  throw new Error(
    `"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`
  );
---

<article
  class="w-80 h-[28rem] rounded-md border border-accent-700 bg-background-50 dark:bg-background-100 overflow-hidden text-text flex flex-col m-3 hover:scale-[1.03] transition-all"
>
  <header
    class:list={[
      "overflow-hidden w-full h-52 flex justify-center items-center",
      gradient,
    ]}
  >
    {
      imagePath && (
        <Image
          src={images[imagePath]()}
          alt={title}
          width={100}
          height={100}
          class="overflow-hidden rounded-md shadow-xl"
          loading={"eager"}
        />
      )
    }
  </header>
  <main class="grow m-5 bg-transparent">
    <h3 class="text-2xl">{title}</h3>
  </main>
  <footer class="flex flex-col items-center justify-center m-5 mb-2">
    <div
      class="h-[1px] w-[90%] mb-1 bg-accent dark:bg-emerald-600 shadow-accent dark:shadow-emerald-600"
    >
    </div>
    <LinkButton
      link={"blogLink"}
      icon="ph:arrow-up-right"
      iconClass="w-3 h-3 text-accent dark:text-emerald-500"
      class="bg-transparent dark:bg-transparent border-0 text-accent dark:text-emerald-500 shadow-none"
    >
      Read More
    </LinkButton>
  </footer>
</article>
